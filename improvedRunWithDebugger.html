<script src="sampleTest.js"></script>
<script>

function runWithDebugger(callback, callbackArgument){
  if(arguments.length > 1){
    if(typeof(callbackArgument) === 'string'){
      return callback(callbackArgument);
    }

    var indexes = Object.keys(callbackArgument);

    if(indexes.length === 0){
      throw new TypeError('An empty array of arguments is given')
    } else {

      for(var i = 0; i < callbackArgument.length; i++){
        if(!(i in callbackArgument)){
          throw new TypeError('Undefined or deleted element is detected on argument array');
        }
      };

      callbackWithArguments = callback.apply(this, callbackArgument);
      return callbackWithArguments;
    }
  };
  return callback();
};


tests({
  'It should have access to the callback function.': function(){
    var timesCallbackRan = 0;
    runWithDebugger(function(){
      timesCallbackRan++;
    });
    eq(timesCallbackRan,1);
  },
  'It should pass argument into the callback function.': function(){
    var callbackArgument = 'watch and code'
    runWithDebugger(function(firstArgument){
      eq(firstArgument, 'watch and code')
    }, callbackArgument);
  },
  'It should pass an optional array that contains arguments for the callback function.': function(){
    var callbackArgument = ['watch and code'];
    runWithDebugger(function(firstArgument){
      eq(firstArgument, 'watch and code')
    }, callbackArgument);
  },
  'It should pass multiple arguments into the array for the callback function.': function(){
    var callbackArgument = ['watch and code','is the','best!'];
    runWithDebugger(function(firstArgument,secondArgument,thirdArgument){
      eq(firstArgument,'watch and code');
      eq(secondArgument,'is the')
      eq(thirdArgument,'best!');
    }, callbackArgument);    
  },
  'It should throw an error when the given argument array is empty.': function(){
    var isTypeError = false;
    try {
      runWithDebugger(function(argument){},[]);
    } catch(e){
      isTypeError = (e instanceof TypeError);
    }
    eq(isTypeError, true);
  },
  'It should throw an error when deleted or undefined argument is given on the array.': function(){
    var isTypeError = false;
    try {
      runWithDebugger(function(first,second){},[,2]);
    } catch(e){
      isTypeError = (e instanceof TypeError);
    }
    eq(isTypeError, true);
  }  
});
</script>